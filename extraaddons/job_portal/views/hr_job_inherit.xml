<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="hr_job_inherit_form" model="ir.ui.view">
            <field name="name">hr.job.inherit.form</field>
            <field name="model">hr.job</field>
            <field name="inherit_id" ref="hr.view_hr_job_form"/>
            <field name="arch" type="xml">
                <!-- Add required invisible field for domain dependencies -->
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="allowed_user_ids" invisible="1"/>
                </xpath>
                
                <!-- Add custom fields in new tab -->
                <xpath expr="//notebook/page[@name='recruitment_page']" position="after">
                    <page name="other_details" string="Other Details">
                        <group>
                        
                            <field name="experience_level"/>
                            <field name="salary"/>
                            <field name="company"/>
                            <field name="about_company"/>
                            <!-- <field name="requirement"/> -->
                            <field name="requirement_ids" widget="many2many" options="{'no_open': True, 'no_create_edit': True, 'no_quick_create': True}"/>
                            <field name="benefit_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>

        <!-- Job Requirements Tree View -->
        <record id="view_hr_job_requirement_tree" model="ir.ui.view">
            <field name="name">hr.job.requirement.tree</field>
            <field name="model">hr.job.requirement</field>
            <field name="arch" type="xml">
                <tree string="Job Requirements">
                    <field name="name"/>
                    <button name="action_delete_requirement" 
                        type="object" 
                        string="delete" 
                        class="btn-danger"
                        confirm="Are you sure you want to delete this requirement? This action cannot be undone!"
                    />
                </tree>
            </field>
        </record>


        <!-- Override Kanban View to Disable Quick Create -->
        <record id="hr_job_kanban_inherit" model="ir.ui.view">
            <field name="name">hr.job.kanban.inherit</field>
            <field name="model">hr.job</field>
            <field name="inherit_id" ref="hr_recruitment.view_hr_job_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//kanban" position="attributes">
                    <attribute name="quick_create">false</attribute>
                    <attribute name="on_create"></attribute>
                </xpath>
            </field>
        </record>
    </data>
</odoo>